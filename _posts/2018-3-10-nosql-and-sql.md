---
layout: post
title:  "NoSQL与SQL的区别"
tag:
- 数据库
comments: true
---

## 简述

NoSQL数据库是近几年兴起的一个概念，与传统的SQL数据库相对，代表产品有MongoDB，Redis，CouchDB等。值得注意的是，NoSQL并不是指对SQL的否定（No SQL），而是Not only SQL的缩写，虽然一直被翻译为非关系型数据库，但或许称之为“超关系型数据库”更为准确。下面梳理出NoSQL与SQL的主要区别。

### 存储方式
SQL数据存在特定结构的表中。  
NoSQL则更加灵活和可扩展，存储方式可以省是JSON、哈希表或者其他方式。

### 数据表的结构
在SQL中，必须定义好表和字段结构后才能添加数据，例如定义表的主键(primary key)，索引(index)，触发器(trigger)，存储过程(stored procedure)等。表结构可以在被定义之后更新，但是如果有比较大的结构变更的话就会变得比较复杂。  
在NoSQL中，数据可以在任何时候任何地方添加，不需要先定义表，展现出极大的自由度。但NoSQL同样也可以在数据集中建立索引，以MongoDB为例，会自动在数据集合创建后创建唯一值_id字段，这样的话就可以在数据集创建后增加索引。

### 外部数据存储
SQL中如何需要增加外部关联数据的话，规范化做法是在原表中增加一个外键，关联外部数据表。  
而在NoSQL中除了这种规范化的外部数据表做法以外，我们还能用非规范化方式把外部数据直接放到原数据集中，以提高查询效率。

### JOIN查询
SQL中可以使用JOIN表链接方式将多个关系数据表中的数据用一条简单的查询语句查询出来。  
而NoSQL暂未提供类似JOIN的查询方式对多个数据集中的数据做查询。所以大部分NoSQL使用非规范化的数据存储方式存储数据。

### 事务
SQL中如果多张表数据需要同批次被更新，即如果其中一张表更新失败的话其他表也不能更新成功。这种场景可以通过事务来控制，可以在所有命令完成后再统一提交事务。  
而NoSQL中没有事务这个概念，每一个数据集的操作都是原子级的。

## 总结
NoSQL数据库是传统SQL数据库的功能阉割版本，通过减少用不到或很少用的功能，来大幅度提高产品性能。同时，它的查询是基于键值对的，数据之间没有耦合性，所以非常容易水平扩展。如果业务不需要用到太复杂的查询，NoSQL的功能完全可以满足要求，那么使用NoSQL数据库就有明显的好处。

但传统的SQL数据库仍然具备它的优势：可以用SQL语句方便的在一个表以及多个表之间做非常复杂的数据查询；使得对于安全性能很高的数据访问要求得以实现。使用哪种数据库要结合实际的业务需求来考虑。

## 参考
<https://www.jianshu.com/p/b32fe4fe45a3>
<https://www.zhihu.com/question/24225007>
